---
layout: post
title: Loongson cross compile toolchain
date: '2009-02-27T09:13:00.004+08:00'
author: Fai Wong
tags:
- linux
modified_time: '2009-02-27T16:01:20.880+08:00'
thumbnail: http://1.bp.blogspot.com/_ZwYFGbHC6Q8/SaedlhEFboI/AAAAAAAAEac/lEbivRKqgxo/s72-c/gentoo-distccd-mips64el-under-rhel5.png
blogger_id: tag:blogger.com,1999:blog-8503500.post-8317536524839821565
blogger_orig_url: http://lazyfai.blogspot.com/2009/02/to-help-compiling-programs-for-loongson.html
---

To help compiling programs for Loongson CPU on my many x86 boxes, I need a cross compile toolchain.<br />In gentoo, it can be done by using crossdev program, first "emerge crossdev" and then "crossdev -t mips64el-unknown-linux-gnu --g 4.4.0_pre9999 --l 2.9_p20081201-r2 --k 2.6.27-r2"<br />This will build a cross compile toolchain on x86/amd64 boxes for cross compiling Loongson box (with the help of distcc). Problem occurs in the building of glibc, as the toolchain is built in the order:<br />binutils -> kernel-headers -> glibc -> gcc<br />But at the stage when it is going to compile glibc, it requires a compiler which supports the target architecture, it is not a problem if we just make for existing platforms, but for Loongson, it requires a latest gcc, which is not there yet.<br /><br />Workaround is to skip some steps and rearrange the order of making, as described here.<br />http://forums.gentoo.org/viewtopic-p-5147128.html?sid=99c56c7a5b05b2bb66a08bbdbf548a46#5147128<br /><br />Finally I got a distcc node with cross compiler for Loongson, running as a guest system under RHEL 5.3 :-)<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://1.bp.blogspot.com/_ZwYFGbHC6Q8/SaedlhEFboI/AAAAAAAAEac/lEbivRKqgxo/s1600-h/gentoo-distccd-mips64el-under-rhel5.png"><img style="cursor: pointer; width: 400px; height: 300px;" src="http://1.bp.blogspot.com/_ZwYFGbHC6Q8/SaedlhEFboI/AAAAAAAAEac/lEbivRKqgxo/s400/gentoo-distccd-mips64el-under-rhel5.png" alt="" id="BLOGGER_PHOTO_ID_5307383953735642754" border="0" /></a>