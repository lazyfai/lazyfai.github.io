---
layout: post
title: Debian and Gentoo on RHEL 5
date: '2007-11-28T17:36:00.000+08:00'
author: Fai Wong
tags:
- linux
modified_time: '2007-11-28T17:43:20.307+08:00'
thumbnail: http://2.bp.blogspot.com/_ZwYFGbHC6Q8/R003FP7yKRI/AAAAAAAAA-o/dd318yU-qlI/s72-c/xen-guests.png
blogger_id: tag:blogger.com,1999:blog-8503500.post-3685899755385425690
blogger_orig_url: http://lazyfai.blogspot.com/2007/11/debian-and-gentoo-on-rhel-5.html
---

Finally figured out a simple method to let other Linux distributions running on RHEL 5 virtualization host, using normal kernel with paravirtualized I/O driver.<br /><br /><a onblur="try {parent.deselectBloggerImageGracefully();} catch(e) {}" href="http://2.bp.blogspot.com/_ZwYFGbHC6Q8/R003FP7yKRI/AAAAAAAAA-o/dd318yU-qlI/s1600-h/xen-guests.png"><img style="cursor: pointer;" src="http://2.bp.blogspot.com/_ZwYFGbHC6Q8/R003FP7yKRI/AAAAAAAAA-o/dd318yU-qlI/s320/xen-guests.png" alt="" id="BLOGGER_PHOTO_ID_5137823313215760658" border="0" /></a><br /><br />1. Install a full virtualized guest (eg. Gentoo, Debian)<br />2. After installation, make another small disk image, about 100M, for new /boot partition<br />3. Copy all the /boot content to the new virtual disk, this will be the full virtualized disk<br />4. Install paravirtualized I/O driver for block device and network device<br />5. Remake the initial ramdisk to include to PV I/O driver<br />6. Modify grub's menu.lst to use the PV device name,eg /dev/xvda1<br />7. Power off the virtualized guest<br />8. Edit the configuration file for the guest, change the root disk to tap:aio:/var/lib/xen/images/xxx.img instead of file:/var/lib/xen/images/xxx.img, and use xvda instead of hda<br />9. Add the small disk image as hda for boot up<br />10. Remove ioemu configuration of vnif network configuration<br />11. Boot it up, it should be running in full virtualized with PV I/O driver for better performance