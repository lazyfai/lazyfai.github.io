---
layout: post
title: Create a debian repository for APT
date: '2008-03-24T00:44:00.001+08:00'
author: Fai Wong
tags:
- linux
- eee
modified_time: '2008-03-24T00:46:23.038+08:00'
blogger_id: tag:blogger.com,1999:blog-8503500.post-8115489679872505244
blogger_orig_url: http://lazyfai.blogspot.com/2008/03/create-debian-repository-for-apt.html
---

Source: http://hausheer.osola.com/docs/14<br />By: David Hausheer<br /><br /><span style="font-weight:bold;">Config files:</span><br /><br />/etc/apt/apt-ftparchive.conf<br />/etc/apt/apt-custom-release.conf<br /><br /><span style="font-weight:bold;">Create tree layout under /path/to/myrepository:</span><br /><br />dists<br />+-custom<br />  +-main<br />    |-binary-i386<br />    +-source<br /><br />Put binary deb files into binary-i386<br />Put source files into source<br /><br /><span style="font-weight:bold;">Create archive config file under /etc/apt/apt-ftparchive.conf:</span><br /><br />Dir {<br />  ArchiveDir "/path/to/myrepository";<br />};<br /><br />BinDirectory "dists/custom/main/binary-i386" {<br />  Packages "dists/custom/main/binary-i386/Packages";<br />  Contents "dists/custom/Contents-i386";<br />  SrcPackages "dists/custom/main/source/Sources";<br />};<br /><br />Tree "dists/custom" {<br />  Sections "main";<br />  Architectures "i386 source";<br />};<br /><br /><span style="font-weight:bold;">Create release config file under /etc/apt/apt-custom-release.conf:</span><br /><br />APT::FTPArchive::Release::Origin "myrepository";<br />APT::FTPArchive::Release::Label "myrepository";<br />APT::FTPArchive::Release::Suite "custom";<br />APT::FTPArchive::Release::Codename "custom";<br />APT::FTPArchive::Release::Architectures "i386 source";<br />APT::FTPArchive::Release::Components "main";<br />APT::FTPArchive::Release::Description "Custom debian packages for myrepository";<br /><br /><span style="font-weight:bold;">Script: /etc/apt/update-archive.sh:</span><br /><br />apt-ftparchive generate apt-ftparchive.conf<br />apt-ftparchive -c apt-custom-release.conf release /path/to/myrepository/dists/custom > /path/to/myrepository/dists/custom/Release<br /><br /><span style="font-weight:bold;">Add repository to /etc/apt/sources.list:</span><br /><br />deb file:/path/to/myrepository/ custom main