---
layout: post
title: Fedora Core 6 with AIGLX on iBook
date: '2006-11-01T16:47:00.000+08:00'
author: Fai Wong
tags:
- linux
modified_time: '2006-11-01T16:50:03.051+08:00'
blogger_id: tag:blogger.com,1999:blog-8503500.post-9065116674415477337
blogger_orig_url: http://lazyfai.blogspot.com/2006/11/fedora-core-6-with-aiglx-on-ibook.html
---

Finally found the reason of having a "blue" screen upon starting beryl-manager, it is due to some stupid coding in Xorg server, which has not considered big endian architectures, like PowerPC.<br />The patch to add is:<br />--- xorg-server-1.1.1/GL/glx/glxdri.c.ppc       2006-11-01 14:25:42.000000000 +0800<br />+++ xorg-server-1.1.1/GL/glx/glxdri.c   2006-11-01 14:29:40.000000000 +0800<br />@@ -401,7 +401,12 @@<br />     if (pixmap->drawable.depth >= 24) {<br />        bpp = 4;<br />        format = GL_BGRA;<br />-       type = GL_UNSIGNED_BYTE;<br />+       type =<br />+#if X_BYTE_ORDER == X_LITTLE_ENDIAN<br />+           GL_UNSIGNED_BYTE;<br />+#else<br />+           GL_UNSIGNED_INT_8_8_8_8_REV;<br />+#endif<br />     } else {<br />        bpp = 2;<br />        format = GL_RGB;<br /><br />At the same time, it is my first time to build RPM for Fedora Core 6, using pbuilder like program called "mock", it is so easy and tidy!